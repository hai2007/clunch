/*!
 * clunch.js <core@template> - üé® The Progressive JavaScript Interactive Picture Framework.
 * git+https://github.com/hai2007/clunch.git
 *
 * author ‰Ω†Â•Ω2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 2.1.0
 *
 * Copyright (c) 2018-2021 hai2007 Ëµ∞‰∏ÄÊ≠•ÔºåÂÜçËµ∞‰∏ÄÊ≠•„ÄÇ
 * Released under the MIT license
 *
 * Date:Fri Sep 24 2021 16:21:52 GMT+0800 (‰∏≠ÂõΩÊ†áÂáÜÊó∂Èó¥)
 */
(function(){"use strict";function n(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){n=function(e){return typeof e}}else{n=function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return n(e)}function r(e){var t=n(e);return e!=null&&(t==="object"||t==="function")}var t=Object.prototype.toString;function i(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return t.call(e)}function e(e){return typeof e==="number"||e!==null&&n(e)==="object"&&i(e)==="[object Number]"}function a(e){var t=n(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&i(e)==="[object String]"}function s(e){if(!r(e)){return false}var t=i(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object Proxy]"}function o(e){if(e===null||n(e)!=="object"||i(e)!="[object Object]"){return false}if(Object.getPrototypeOf(e)===null){return true}var t=e;while(Object.getPrototypeOf(t)!==null){t=Object.getPrototypeOf(t)}return Object.getPrototypeOf(e)===t}var l=function e(t,r){return r!==null&&n(r)==="object"&&t.indexOf(r.nodeType)>-1&&!o(r)};var S=e;var $=a;var x=s;var k=function e(t){return Array.isArray(t)};var u=function e(t){return l([1,9,11],t)};var f=[];var c=13;var h=400;var d=null;function p(t,e,r){if(arguments.length<2)e=h;var l={timer:function e(t,r,n){if(!t){throw new Error("Tick is required!")}var i=(new Date).valueOf()+"_"+(Math.random()*1e3).toFixed(0);f.push({id:i,createTime:new Date,tick:t,duration:r,callback:n});l.start();return i},start:function e(){if(!d){d=setInterval(l.tick,c)}},tick:function e(){var t,r,e,n,i,a,s,o=f;f=[];f.length=0;for(r=0;r<o.length;r++){i=o[r];t=i.createTime;e=i.tick;a=i.duration;n=i.callback;s=(+new Date-t)/a;s=s>1?1:s;e(s);if(s<1&&i.id){f.push(i)}else if(n){n(s)}}if(f.length<=0){l.stop()}},stop:function e(){if(d){clearInterval(d);d=null}}};var n=l.timer(function(e){t(e)},e,r);return function(){var e;for(e in f){if(f[e].id==n){f[e].id=undefined;return}}}}var v=function e(t,r){for(var n in r){try{t[n]=r[n]}catch(e){throw new Error("Illegal property valueÔºÅ")}}return t};var g={whitespace:"[\\x20\\t\\r\\n\\f]"};var _=function e(t){if(/^[_$]/.test(t)){console.warn("The beginning of _ or $ is not allowedÔºö"+t)}};function m(e,t){for(var r in t){try{e[r]=t[r]}catch(e){throw new Error("Illegal property valueÔºÅ")}}return e}function b(l){l=m({u:.5},l);var u,f,c;var h=function e(t){if(u){var r=(t-f)/(c-f),n=r*r,i=r*n;var a=i*u[0]+n*u[1]+r*u[2]+u[3];return a*(c-f)}else throw new Error("You shoud first set the position!")};h.setP=function(e,t,r,n,i,a){if(e<r){f=e;c=r;var s=l.u*i,o=l.u*a;t/=r-e;n/=r-e;u=[2*t-2*n+s+o,3*n-3*t-2*s-o,s,t]}else throw new Error("The point x-position should be increamented!");return h};return h}function y(i){i=v({t:0},i);var a,r;var s=function e(t){if(a){r=-1;while(r+1<a.x.length&&(t>a.x[r+1]||r==-1&&t>=a.x[r+1])){r+=1}if(r==-1||r>=a.h.length)throw new Error("Coordinate crossing!");return a.h[r](t)}else{throw new Error("You shoud first set the position!")}};s.setT=function(e){if(typeof e==="number"){i.t=e}else{throw new Error("Expecting a figure!")}return s};s.setP=function(e){a={x:[],h:[]};var t,r=(e[1][1]-e[0][1])/(e[1][0]-e[0][0]),n;a.x[0]=e[0][0];for(t=1;t<e.length;t++){if(e[t][0]<=e[t-1][0])throw new Error("The point position should be increamented!");a.x[t]=e[t][0];n=t<e.length-1?(e[t+1][1]-e[t-1][1])/(e[t+1][0]-e[t-1][0]):(e[t][1]-e[t-1][1])/(e[t][0]-e[t-1][0]);a.h[t-1]=b({u:(1-i.t)*.5}).setP(e[t-1][0],e[t-1][1],e[t][0],e[t][1],r,n);r=n}return s};return s}function w(e,t){var r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle;return $(t)?r.getPropertyValue(t):r}var T=function e(t){var r=document.getElementsByTagName("head")[0];r.style["color"]=t;var n=w(r,"color");var i=n.replace(/^rgba?\(([^)]+)\)$/,"$1").split(new RegExp("\\,"+g.whitespace));return[+i[0],+i[1],+i[2],i[3]==undefined?1:+i[3]]};var A=function e(t,r){if(!(r&&r>=0&&r<=1))r=1;var n=[];for(var i=1;i<=t;i++){n.push("rgba("+(Math.random()*230+20).toFixed(0)+","+(Math.random()*230+20).toFixed(0)+","+(Math.random()*230+20).toFixed(0)+","+r+")")}return n};var N=function e(t,r){if(!(r&&r>=0&&r<=1))r=1;var n=["rgba(84,112,198,"+r+")","rgba(145,204,117,"+r+")","rgba(250,200,88,"+r+")","rgba(238,102,102,"+r+")","rgba(115,192,222,"+r+")","rgba(59,162,114,"+r+")","rgba(252,132,82,"+r+")","rgba(154,96,180,"+r+")","rgba(234,124,204,"+r+")"];var i=[];if(t<=n.length){return n}else{if(t%n.length==0){for(var a=0;a<t/n.length;a++){i=i.concat(n)}}else{for(var s=1;s<t/n.length;s++){i=i.concat(n)}if(t%n.length==1){i=i.concat(n[4])}else{for(var o=0;o<t%n.length;o++){i=i.concat(n[o])}}}}return i};function M(e){var u=e||{},f,n;var i=function e(){var s=[],o=0,l=0;(function e(t,r){if(r>l)l=r;var n;for(n=0;n<t.children.length;n++){e(f[t.children[n]],r+1)}f[t.id].left=r+.5;if(n==0){if(s[r]==undefined)s[r]=-.5;if(s[r-1]==undefined)s[r-1]=-.5;f[t.id].top=s[r]+1;var i=s[r]+1+(f[t.pid].children.length-1)*.5;if(i-1<s[r-1])f[t.id].top=s[r-1]+1-(f[t.pid].children.length-1)*.5}else{f[t.id].top=(f[t.children[0]].top+f[t.children[n-1]].top)*.5}if(f[t.id].top<=s[r]){var a=s[r]+1-f[t.id].top;(function e(t,r){f[t].top+=a;if(s[r]<f[t].top)s[r]=f[t].top;var n;for(n=0;n<f[t].children.length;n++){e(f[t].children[n],r+1)}})(t.id,r)}s[r]=f[t.id].top;if(f[t.id].top+.5>o)o=f[t.id].top+.5})(f[n],0);return{node:f,root:n,size:o,deep:l+1}};var a=function e(a){var s={};var t=u.root(a),o,r;o=r=u.id(t);s[o]={data:t,pid:null,id:o,children:[]};var l=1;(function e(t,r){var n=u.child(t,a),i;l+=n?n.length:0;for(i=0;n&&i<n.length;i++){o=u.id(n[i]);s[r].children.push(o);s[o]={data:n[i],pid:r,id:o,children:[]};e(n[i],o)}})(t,o);return{value:[r,s],num:l}};var t=function e(t){var r=a(t);f=r.value[1];n=r.value[0];if(r.num==1){f[n].left=.5;f[n].top=.5;return{deep:1,node:f,root:n,size:1}}return i()};t.root=function(e){u.root=e;return t};t.child=function(e){u.child=e;return t};t.id=function(e){u.id=e;return t};return t}var O=function e(t,r,n,i,a){var s=Math.cos(n),o=Math.sin(n);return[+((i-t)*s-(a-r)*o+t).toFixed(7),+((i-t)*o+(a-r)*s+r).toFixed(7)]};var R=function e(t,r,n,i,a){var s=Math.sqrt(t*t+r*r);return[+(t*n/s+i).toFixed(7),+(r*n/s+a).toFixed(7)]};var z=function e(t,r,n,i,a){return[+(n*(i-t)+t).toFixed(7),+(n*(a-r)+r).toFixed(7)]};var C=function e(a){a=v({d:[1,1],c:[0,0],p:[0,0]},a);var s={rotate:function e(t){var r=a.d[0]+a.p[0],n=a.d[1]+a.p[1];var i=O(a.p[0],a.p[1],t,r,n);a.d=[i[0]-a.p[0],i[1]-a.p[1]];return s},move:function e(t){a.p=R(a.d[0],a.d[1],t,a.p[0],a.p[1]);return s},scale:function e(t){a.p=z(a.c[0],a.c[1],t,a.p[0],a.p[1]);return s},value:function e(){return a.p}};return s};function E(b){b=v({"begin-deg":0,deg:Math.PI*2},b);var y=M().root(b.root).child(b.child).id(b.id);var t=function e(t){var r=y(t);for(var n in r.node){r.node[n].deep=r.node[n].left-.5}if(b.type==="LR"||b.type==="RL"){var i=b.width/r.deep;if("RL"===b.type)i*=-1;var a=b.height/(r.size- -.5);for(var s in r.node){var o=r.node[s];r.node[s].left=+(("RL"==b.type?b.width:0)- -o.left*i).toFixed(7);r.node[s].top=+(o.top*a).toFixed(7)}}else if(b.type==="TB"||b.type==="BT"){var l=b.height/r.deep;if("BT"==b.type)l*=-1;var u=b.width/(r.size- -.5);var f,c;for(var h in r.node){var d=r.node[h];f=d.left;c=d.top;r.node[h].top=+(("BT"==b.type?b.height:0)- -f*l).toFixed(7);r.node[h].left=+(c*u).toFixed(7)}}else if(b.type==="circle"){if(r.deep==1&&r.size==1){r.node[r.root].left=b.cx;r.node[r.root].top=b.cy}else{var p=b.radius/(r.deep-1);var v=b.deg/(r.size- -.5);for(var g in r.node){var _=r.node[g];r.node[g].deg=(b["begin-deg"]- -v*_.top)%(Math.PI*2);var m=O(b.cx,b.cy,r.node[g].deg,b.cx- -p*(_.left-.5),b.cy);r.node[g].left=+m[0];r.node[g].top=+m[1]}}}if(x(b.drawer)){b.drawer(r);return e}else{return r}};t.config=function(e){b=v(b,e);return t};t.drawer=function(e){b.drawer=e;return t};return t}var P=function e(t,r,n,i){var a=Math.cos(t),s=Math.sin(t);return[r,n*a-i*s,n*s+i*a]},I=function e(t,r,n,i){var a=Math.cos(t),s=Math.sin(t);return[i*s+r*a,n,i*a-r*s]},j=function e(t,r,n,i){var a=Math.cos(t),s=Math.sin(t);return[r*a-n*s,r*s+n*a,i]};var D=[];function F(e,t,r){D=I((360-r)/180*Math.PI,100*e.scale,0,0);D=j(t/180*Math.PI,D[0],D[1],D[2]);D=j((90-e.center[0])/180*Math.PI,D[0],D[1],D[2]);D=P((90-e.center[1])/180*Math.PI,D[0],D[1],D[2]);return[-D[0],D[1],D[2]]}function W(e){var n=v({type:"eoap",scale:1,center:[107,36]},e);var t=function e(t,r){if(n.type=="eoap"){return F(n,t,r)}else{throw new Error("Map type configuration error!")}};t.config=function(e){n=v(n,e);return t};return t}function L(e,t,r){if(e<t){var n=t;t=e;e=n}else if(e==t){return[e]}var i=(e+".").split(".")[1].length;var a=(t+".").split(".")[1].length;var s=i>a?i:a;var o=function(e){var t=e<100&&e>-100?10:.1;var r=1,n=e;while(t==10?n>=-100&&n<=100:n<=-100||n>=100){r*=t;n*=t}return r}(e-t);var l=Math.ceil((e-t)*o/r)/o;var u=Math.floor(t/l)*l;var f=[],c;f.push(u);for(c=1;f[f.length-1]<e;c++){f.push(+(u+l*c).toFixed(s))}f[0]=+u.toFixed(s);var h=[f[0]];for(var d=1;d<f.length;d++){if(h[h.length-1]!=f[d]){h.push(f[d])}}return h}function B(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;var n=L(e,t,r);return{min:n[0],max:n[n.length-1],distance:n.length<=1?0:n[1]-n[0],num:n.length-1,ruler:n}}function U(i){var t=[];var e=function e(n){if(["boolean","number","json","string","color","any"].indexOf(i[n])>-1){t.unshift(function(t){var r=arguments.length>0?false:true;return function(e){return{type:i[n],required:r,animation:e,default:t}}})}else{t.unshift({$animation:p,$cardinal:y,$formatColor:T,$getRandomColors:A,$tree:E,$dot:C,$rotate:O,$move:R,$scale:z,$map:W,$getLoopColors:N,$ruler:B}[i[n]])}};for(var r=i.length-2;r>=0;r--){e(r)}return i[i.length-1].apply(this,t)}var q=Object.prototype.toString;function V(e){if(e==null){return e===undefined?"[object Undefined]":"[object Null]"}return q.call(e)}function Y(e){var t=n(e);return t==="string"||t==="object"&&e!=null&&!Array.isArray(e)&&V(e)==="[object String]"}var G=Y;function Z(t){var r={index:-1,currentChar:null};r.readNext=function(){r.currentChar=r.index++<t.length-1?t[r.index]:null;return r.currentChar};r.getNextN=function(e){return t.substring(r.index,e+r.index>t.length?t.length:e+r.index)};return r}var H=Z;function J(e){e=e.trim();var t=H(e);var r=[];var n="";t.readNext();var i=function e(){n=n.trim();if(n!=""){r.push({type:"normal",value:n})}n=""};while(true){if(t.index>=e.length)break;if(["{","}",",","[","]",":"].indexOf(t.currentChar)>-1){i();r.push({type:"insign",value:t.currentChar});t.readNext()}else if(['"',"'"].indexOf(t.currentChar)>-1){var a="";while(['"',"'"].indexOf(t.readNext())<0){a+=t.currentChar}t.readNext();r.push({type:"string",value:a})}else{n+=t.currentChar;t.readNext()}}return r}var X=function e(t){if(t.type!="string"&&t.type!="object"){if(/[+-]{0,1}\d{1,}\.{0,1}\d{0,}/.test(t.value)){return+t.value}else if(t.value=="undefined"){return undefined}else if(t.value=="null"){return null}else if(t.value=="false"){return false}else if(t.value=="true"){return true}}return t.value};function K(e){var t,r;if(e[0].value=="{"){t={};for(r=3;r<e.length;r+=4){t[e[r-2].value]=X(e[r])}}else{t=[];for(r=2;r<e.length;r+=2){t.push(X(e[r-1]))}}return{type:"object",value:t}}var Q=function e(t){if(G(t)){var r=J(t);var n=r.length-1,i;while(r.length>1){while(n>=0&&(r[n].type!="insign"||["{","["].indexOf(r[n].value)<0)){n=n-1}if(n<0){throw new Error("Illegal express : "+t+"\nstep='toOne-searchBeginIndex',wordArray="+r)}i=n+1;var a=[r[n]];while(i<r.length&&(r[i].type!="insign"||r[i].value!={"{":"}","[":"]"}[r[n].value])){a.push(r[i]);i=i+1}if(i>=r.length){throw new Error("Illegal express : "+t+"\nstep='toOne-searchEndIndex',wordArray="+r)}else{a.push(r[i]);r[n]=K(a);r.splice(n+1,i-n)}}return r[0].value}else{throw new Error("The data passed is not a string.")}};var ee=function e(t,r){switch(t){case"boolean":{return r=="false"||r==false?false:true}case"number":{if(/deg$/.test(r))return(0- -r.replace(/deg$/,""))/180*Math.PI;if(/pi$/.test(r))return(0- -r.replace(/pi$/,""))*Math.PI;if($(r))return+r;return r}case"json":{if($(r)){return Q(r.replace(/\&quot;/g,""))}return r}}return r};function te(e,x){e=JSON.parse(JSON.stringify(e));var w=0;return function e(t,r){var n=[];for(var i=0;i<t.length;i++){var a=t[i];if(r||a.name in x){var s={name:a.name,attrs:{},events:[],scope:{},index:w++};var o=r?{attrs:x[r].subAttrs[a.name]}:x[a.name];for(var l in a.attrs){if(/^c\-bind\:/.test(l)||/^\:/.test(l)){a.attrs[l.replace(/^(?:c\-bind){0,1}\:/,"")]={isBind:true,express:a.attrs[l]};delete a.attrs[l]}else if(/^c\-on\:/.test(l)){var u=(l.replace(/^c\-on\:/,"")+"@default").split("@");s.events.push({event:u[0],region:u[1],method:a.attrs[l]})}else if("c-for"==l){var f=/^ {0,}\(/.test(a.attrs[l]);var c=f?/^ {0,}\( {0,}([0-9a-zA-Z_$]+) {0,}, {0,}([0-9a-zA-Z_$]+) {0,}\) {1,}in {1,}([^ ]+) {0,}$/.exec(a.attrs[l]):/^ {0,}([0-9a-zA-Z_$]+) {1,}in {1,}([^ ]+) {0,}$/.exec(a.attrs[l]);s["c-for"]={key:f?c[2]:null,value:c[1],data:f?c[3]:c[2]};if(/^\d{1,}$/.test(s["c-for"].data)){var h=+s["c-for"].data;s["c-for"].data=[];for(var d=0;d<h;d++){s["c-for"].data.push(d)}}}else if("c-if"==l){s["c-if"]=a.attrs[l]}else{a.attrs[l]={isBind:false,express:a.attrs[l]}}}for(var p in a.attrs){if(/^c\-/.test(p));else if(p=="_id"){s._id=a.attrs._id}else if(p=="_animation"){s._animation=a.attrs._animation}else if(!(p in o.attrs)){console.warn("attrs."+p+" is not defined for "+(r?r+" > "+a.name:a.name)+"!")}}for(var v in o.attrs){var g=o.attrs[v];if(g.required&&!(v in a.attrs)){throw new Error("attrs."+v+" is required for "+(r?r+" > "+a.name:a.name)+"!")}s.attrs[v]={animation:g.animation,type:g.type,value:v in a.attrs?a.attrs[v]:{isBind:false,express:g["default"]}};if(!s.attrs[v].value.isBind){s.attrs[v].value.express=ee(s.attrs[v].type,s.attrs[v].value.express)}}var _=[],m=[],b=[];if(a.children){for(var y=0;y<a.children.length;y++){if($(a.children[y])){b.push(a.children[y])}else if(o.subAttrs&&a.children[y].name in o.subAttrs){m.push(a.children[y])}else{_.push(a.children[y])}}}s.children=e(_);s.subAttrs=e(m,a.name);s.text=b;n.push(s)}else{console.error("Series "+a.name+" is not defined!")}}return n}(e)}var re=function e(t,r,n,i,a){var s=Math.cos(n),o=Math.sin(n);return[+((i-t)*s-(a-r)*o+t).toFixed(7),+((i-t)*o+(a-r)*s+r).toFixed(7)]};function ne(e,t,r,n,i,a,s){if(t<0){e+=t;t*=-1}var o=[],l;l=re(0,0,e,i,0);o[0]=l[0];o[1]=l[1];l=re(0,0,t,l[0],l[1]);o[2]=l[0];o[3]=l[1];l=re(0,0,e,a,0);o[4]=l[0];o[5]=l[1];l=re(0,0,t,l[0],l[1]);o[6]=l[0];o[7]=l[1];s(e,e+t,o[0]+r,o[1]+n,o[4]+r,o[5]+n,o[2]+r,o[3]+n,o[6]+r,o[7]+n,(a-i)*.5)}var ie={fillStyle:"black",strokeStyle:"black",lineWidth:1,textAlign:"left",textBaseline:"middle","font-size":16,"font-family":"sans-serif","arc-start-cap":"butt","arc-end-cap":"butt",lineDash:[],shadowBlur:0,shadowColor:"black"};var ae=function e(t,r,n,i,a,s){t.beginPath();t.translate(n,i);t.rotate(a);if(s!="default"){t.setFontSize(r["font-size"])}else{t.font=r["font-size"]+"px "+r["font-family"]}return t};var se=function e(c,h,d,p,v,g,t,r){if(v>g){var n=v;v=g;g=n}t=t%(Math.PI*2);if(r>=Math.PI*1.999999||r<=-Math.PI*1.999999){r=Math.PI*2}else{r=r%(Math.PI*2)}ne(t,r,d,p,v,g,function(e,t,r,n,i,a,s,o,l,u,f){if(f<0)f=-f;c.beginPath();c.moveTo(r,n);c.arc(d,p,v,e,t,false);if(h["arc-end-cap"]!="round")c.lineTo(l,u);else c.arc((s+l)*.5,(o+u)*.5,f,t-Math.PI,t,true);c.arc(d,p,g,t,e,true);if(h["arc-start-cap"]!="round")c.lineTo(r,n);else c.arc((r+i)*.5,(n+a)*.5,f,e,e-Math.PI,true)});if(h["arc-start-cap"]=="butt")c.closePath();return c};var oe=function e(t,r,n,i){t.beginPath();t.moveTo(r+i,n);t.arc(r,n,i,0,Math.PI*2);return t};var le=function e(t,r,n,i,a){t.beginPath();t.rect(r,n,i,a);return t};var ue=function e(t,r,n,i,a){var s=t.createLinearGradient(r,n,i,a);var o={value:function e(){return s},addColorStop:function e(t,r){s.addColorStop(t,r);return o}};return o};var fe=function e(t,r,n,i){var a=t.createRadialGradient(r,n,0,r,n,i);var s={value:function e(){return a},addColorStop:function e(t,r){a.addColorStop(t,r);return s}};return s};var ce={};function he(a,t,f,c){var h;if(a!="default"){h=t.painter}else{h=t.getContext("2d");t.style.width=f+"px";t.style.height=c+"px";t.setAttribute("width",f*2);t.setAttribute("height",c*2);h.scale(2,2)}var o={};var r=a=="uni-app"?function(t,e){if(["font-size","font-family","arc-start-cap","arc-end-cap"].indexOf(t)>-1){o[t]=e}else{try{h["set"+t[0].toUpperCase()+t.substr(1)](e)}catch(e){if(!ce[a]){ce[a]={}}if(!ce[a][t]){ce[a][t]=true;console.warn("ClunchÂÜÖÁΩÆÁîªÁ¨îÁöÑ"+t+"Â±ûÊÄßÂú®"+a+"Âπ≥Âè∞‰∏ä‰∏çÊîØÊåÅÔºÅ")}}}}:function(e,t){if(e=="lineDash"){h.setLineDash(t)}else if(["font-size","font-family","arc-start-cap","arc-end-cap"].indexOf(e)>-1){o[e]=t}else if(e in ie){h[e]=t}else{throw new Error("Illegal configuration item of painter : "+e+" !")}};var d={config:function e(){if(arguments.length===1){if(n(arguments[0])!=="object")return h[arguments[0]];for(var t in arguments[0]){r(t,arguments[0][t])}}else if(arguments.length===2){r(arguments[0],arguments[1])}return d},fillText:function e(t,r,n,i){h.save();ae(h,o,r,n,i||0,a).fillText(t,0,0);h.restore();return d},strokeText:function e(t,r,n,i){h.save();ae(h,o,r,n,i||0,a).strokeText(t,0,0);h.restore();return d},fullText:function e(t,r,n,i){h.save();ae(h,o,r,n,i||0,a);h.fillText(t,0,0);h.strokeText(t,0,0);h.restore();return d},beginPath:function e(){h.beginPath();return d},closePath:function e(){h.closePath();return d},moveTo:function e(t,r){h.moveTo(t,r);return d},lineTo:function e(t,r){h.lineTo(t,r);return d},arc:function e(t,r,n,i,a){h.arc(t,r,n,i,i+a,a<0);return d},fill:function e(){h.fill();return d},stroke:function e(){h.stroke();return d},full:function e(){h.fill();h.stroke();return d},save:function e(){h.save();return d},restore:function e(){h.restore();return d},quadraticCurveTo:function e(t,r,n,i){h.quadraticCurveTo(t,r,n,i);return d},bezierCurveTo:function e(t,r,n,i,a,s){h.bezierCurveTo(t,r,n,i,a,s);return d},clearRect:function e(t,r,n,i){h.clearRect(t||0,r||0,n||f,i||c);return d},toDataURL:function e(){return t.toDataURL()},drawImage:function e(t,r,n,i,a,s,o,l,u){r=r||0;n=n||0;s=s||0;o=o||0;l=l?l*2:f*2;u=u?u*2:c*2;if(t.nodeName=="CANVAS"){l=l/2;u=u/2;i=i?i*2:f*2;a=a?a*2:c*2}else{i=(i||t.width)*2;a=(a||t.height)*2}h.drawImage(t,r,n,i,a,s,o,l,u);return d},fillArc:function e(t,r,n,i,a,s){se(h,o,t,r,n,i,a,s).fill();return d},strokeArc:function e(t,r,n,i,a,s){se(h,o,t,r,n,i,a,s).stroke();return d},fullArc:function e(t,r,n,i,a,s){se(h,o,t,r,n,i,a,s);h.fill();h.stroke();return d},fillCircle:function e(t,r,n){oe(h,t,r,n).fill();return d},strokeCircle:function e(t,r,n){oe(h,t,r,n).stroke();return d},fullCircle:function e(t,r,n){oe(h,t,r,n);h.fill();h.stroke();return d},fillRect:function e(t,r,n,i){le(h,t,r,n,i).fill();return d},strokeRect:function e(t,r,n,i){le(h,t,r,n,i).stroke();return d},fullRect:function e(t,r,n,i){le(h,t,r,n,i);h.fill();h.stroke();return d},createLinearGradient:function e(t,r,n,i){return ue(h,t,r,n,i)},createRadialGradient:function e(t,r,n){return fe(h,t,r,n)}};return d}function de(e,t,r){if(window.attachEvent){e.attachEvent("on"+t,r)}else{e.addEventListener(t,r,false)}}var pe=function e(t,r){if(r.type=="result")return{x:r.position.left,y:r.position.top};var n=t.getBoundingClientRect();return{x:r.clientX-n.left,y:r.clientY-n.top}};function ve(s,n){var i=1,a=1;var o={},l={},u=[0,0,0],f="r";var c,h;if(s._platform=="default"){c=document.createElement("canvas");h=he(s._platform,c,1,1)}else{c=n.region;h=he(s._platform,{painter:n.region},n.width,n.height);i=n.width;a=n.height}return{draw:function e(){c.draw()},erase:function e(){h.config({fillStyle:"rgb(255,255,255)"}).fillRect(0,0,i,a)},updateSize:function e(t,r){i=t;a=r;if(s._platform=="default"){h=he(s._platform,c,t,r)}else{h=he(s._platform,{painter:n.region},t,r)}},painter:function e(t,r){if(o[t]==undefined){o[t]={r:function e(){u[0]+=1;f="g";return"rgb("+u[0]+","+u[1]+","+u[2]+")"},g:function e(){u[1]+=1;f="b";return"rgb("+u[0]+","+u[1]+","+u[2]+")"},b:function e(){u[2]+=1;f="r";return"rgb("+u[0]+","+u[1]+","+u[2]+")"}}[f]()}l[t]=r;h.config(ie).config({fillStyle:o[t],strokeStyle:o[t]});return h},getRegion:function e(t,r){var n=pe(s.__canvas,t),i;var a=function e(){for(var t in o){if("rgb("+i[0]+","+i[1]+","+i[2]+")"==o[t]){r([t,n.x,n.y,l[t]]);return}}r([null,n.x,n.y,undefined])};if(s._platform=="default"){n.x-=w(s.__canvas,"border-left-width").replace("px","");n.y-=w(s.__canvas,"border-top-width").replace("px","");i=c.getContext("2d").getImageData(n.x*2-.5,n.y*2-.5,1,1).data;a()}else{s.__options.el.getRegionColor({x:n.x-.5,y:n.y-.5,width:1,height:1,canvasId:s.__options.el.regionid,success:function e(t){i=t.data;a()},fail:function e(t){throw new Error(t)}})}}}}function ge(e){e.prototype.$$init=function(e){var i=this;this.__options=e;this._debug="debug"in e?e.debug:true;this._platform="platform"in e?e.platform:"default";this.__data=k(e.data)?U(e.data):x(e.data)?e.data():e.data;this.__animation="animation"in e?e.animation:true;this._isMounted=false;this._isDestroyed=false;for(var t in e.methods){_(t);this[t]=k(e.methods[t])?U(e.methods[t]):e.methods[t]}for(var r in this.__data){_(r);this[r]=this.__data[r]}this.__renderFlag=!!e.render||!!e.template;if(!!e.render){this.__renderAOP=te(e.render,this.__defineSerirs)}else if(!!e.template){this.__renderOptions=this.$$templateCompiler(e.template);this.__renderAOP=te(this.__renderOptions,this.__defineSerirs)}this.__observeWatcher={flag:false,stop:null,time:"time"in e?e.time:500};this.__observeResize={help:true,flag:false,observer:null};this.__painter=null;this._width=0;this._height=0;this._min=0;this._max=0;if(this._platform=="default"){this.__regionManager=ve(this)}else{this.__regionManager=ve(this,e.el)}this.$$trigger=function(e,t){var r=i.__events_platform[e];for(var n=0;n<r.length;n++){r[n]({type:"result",position:t})}}}}function _e(e){e.prototype.$$lifecycle=function(e){if(x(e)){e()}else{if(["created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","beforeResize","resized","beforeDraw","drawed","beforeDestroy","destroyed"].indexOf(e)>-1&&x(this.__options[e])){this.__options[e].call(this)}}return this}}var me={blankReg:new RegExp("[\\x20\\t\\r\\n\\f]"),blanksReg:/^[\x20\t\r\n\f]{0,}$/,identifier:/^[a-zA-Z_$][0-9a-zA-Z_$]{0,}$/};var be=["+","-","*","/","%","&","|","!","?",":","[","]","(",")",">","<","="];var ye=["+","-","*","/","%","&","|","!","?",":",">","<","=","<=",">=","==","===","!=","!=="];function xe(e,r,t){r=r.trim();var n=-1,i=null;var a=function e(){i=n++<r.length-1?r[n]:null;return i};var s=function e(t){return r.substring(n,t+n>r.length?r.length:t+n)};a();var o=[];while(true){if(n>=r.length)break;if(be.indexOf(i)>-1){if(["&","|","="].indexOf(i)>-1){if(["==="].indexOf(s(3))>-1){o.push(s(3));n+=2;a()}else if(["&&","||","=="].indexOf(s(2))>-1){o.push(s(2));n+=1;a()}else{throw new Error("Illegal expression : "+r+"\nstep='analyseExpress',index="+n)}}else{if(["!=="].indexOf(s(3))>-1){o.push(s(3));n+=2;a()}else if([">=","<=","!="].indexOf(s(2))>-1){o.push(s(2));n+=1;a()}else{o.push(i);a()}}}else if(['"',"'"].indexOf(i)>-1){var l="",u=i;a();while(i!=u){if(n>=r.length){throw new Error("String unclosed error : "+r+"\nstep='analyseExpress',index="+n)}l+=i;a()}o.push(l+"@string");a()}else if(/\d/.test(i)){var f="no";var l=i;a();while(n<r.length){if(/\d/.test(i)){l+=i;if(f=="error")f="yes"}else if("."==i&&f=="no"){l+=i;f="error"}else{break}a()}if(f=="error")l+="0";o.push(+l)}else if(["null","true"].indexOf(s(4))>-1){o.push({null:null,true:true}[s(4)]);n+=3;a()}else if(["false"].indexOf(s(5))>-1){o.push({false:false}[s(5)]);n+=4;a()}else if(["undefined"].indexOf(s(9))>-1){o.push({undefined:undefined}[s(9)]);n+=8;a()}else if(me.blankReg.test(i)){do{a()}while(me.blankReg.test(i)&&n<r.length)}else{var c=false;if(i=="."){c=true;a()}if(me.identifier.test(i)){var h=1;while(n+h<=r.length&&me.identifier.test(s(h))){h+=1}if(c){o.push("[");o.push(s(h-1)+"@string");o.push("]")}else{var d=s(h-1);var p=d in t?t[d]:e[d];o.push(G(p)?p+"@string":p)}n+=h-2;a()}else{throw new Error("Illegal express : "+r+"\nstep='analyseExpress',index="+n)}}}var v=0;for(var g=0;g<o.length;g++){if(["+","-"].indexOf(o[g])>-1&&(g==0||ye.indexOf(o[v-1])>-1)){o[v++]=+(o[g]+o[g+1]);g+=1}else{o[v++]=o[g]}}o.length=v;return o}var we=function e(t){if(typeof t=="string")return t.replace(/@string$/,"");return t};var $e=function e(t){if(typeof t=="string")return t+"@string";return t};function Te(e){var t=0,r=0;for(;r<e.length;r++){if(e[r]=="!"){e[t]=!e[++r]}else e[t]=e[r];t+=1}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="*"){e[t-1]=we(e[t-1])*we(e[++r])}else if(e[r]=="/"){e[t-1]=we(e[t-1])/we(e[++r])}else if(e[r]=="%"){e[t-1]=we(e[t-1])%we(e[++r])}else{e[t++]=e[r]}}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="+"){e[t-1]=$e(we(e[t-1])+we(e[++r]))}else if(e[r]=="-"){e[t-1]=we(e[t-1])-we(e[++r])}else e[t++]=e[r]}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]==">"){e[t-1]=we(e[t-1])>we(e[++r])}else if(e[r]=="<"){e[t-1]=we(e[t-1])<we(e[++r])}else if(e[r]=="<="){e[t-1]=we(e[t-1])<=we(e[++r])}else if(e[r]==">="){e[t-1]=we(e[t-1])>=we(e[++r])}else e[t++]=e[r]}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="=="){e[t-1]=we(e[t-1])==we(e[++r])}else if(e[r]=="==="){e[t-1]=we(e[t-1])===we(e[++r])}else if(e[r]=="!="){e[t-1]=we(e[t-1])!=we(e[++r])}else if(e[r]=="!=="){e[t-1]=we(e[t-1])!==we(e[++r])}else e[t++]=e[r]}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="&&"){e[t-1]=we(e[t-1])&&we(e[1+r]);r+=1}else if(e[r]=="||"){e[t-1]=we(e[t-1])||we(e[1+r]);r+=1}else e[t++]=e[r]}if(t==1)return we(e[0]);e.length=t;t=0;for(r=0;r<e.length;r++){if(e[r]=="?"){e[t-1]=we(e[t-1])?we(e[r+1]):we(e[r+3]);r+=3}else e[t++]=e[r]}if(t==1)return we(e[0]);e.length=t;throw new Error("Unrecognized expression : ["+e.toString()+"]")}function Se(t,r,n){var e=r[0]in n?n[r[0]]:t[r[0]];for(var i=1;i<r.length;i++){try{e=e[r[i]]}catch(e){console.error({target:t,scope:n,expressArray:r,index:i});throw e}}return e}var ke=function e(t,r,n){if(r.indexOf("(")>-1){var i=[],a=[],s=0;for(var o=0;o<r.length;o++){if(r[o]=="("){if(s>0){a.push("(")}s+=1}else if(r[o]==")"){if(s>1)a.push(")");s-=1;if(s==0){var l=Te(e(t,a));i.push(G(l)?l+"@string":l);a=[]}}else{if(s>0)a.push(r[o]);else i.push(r[o])}}r=i}return Ae(r)};var Ae=function e(t){var r=true;while(r){r=false;var n=[],i=[],a=false;for(var s=0;s<t.length;s++){if(t[s]=="["&&s!=0&&t[s-1]!="]"){if(a){n.push("[");for(var o=0;o<i.length;o++){n.push(i[o])}}else{a=true}i=[]}else if(t[s]=="]"&&a){r=true;var l=Te(i);var u=n[n.length-1][l];n[n.length-1]=G(u)?u+"@string":u;a=false}else{if(a){i.push(t[s])}else{n.push(t[s])}}}t=n}return t};var Ne=function e(t){var r=[],n=[];for(var i=0;i<t.length;i++){if(t[i]=="["){n=[]}else if(t[i]=="]"){r.push(Te(n))}else{n.push(t[i])}}return r};function Me(e,t,r){var n=ke(e,t);var i;if(n[0]!="["){i=[Te(n)]}else if(n[n.length-1]=="]"){i=Ne(n)}else{var a=n.lastIndexOf("]");var s=Ne(n.slice(0,a+1));var o=n.slice(a+1);o.unshift(Se(e,s,r));i=[Te(o)]}return i}var Oe=function e(t,r,n){if(arguments.length<3)n={};var i=xe(t,r,n);var a=Me(t,i,n);if(a.length>1)throw new Error("Illegal expression : "+r+"\nstep='evalExpress',path="+a+",expressArray="+i);return a[0]};var Re=function e(t,r,n){if(r.animation&&t.value!=r.value){if(x(r.animation)){return{type:r.type,animation:true,value:r.animation(r.value,t.value,n)}}if(r.type=="number"){return{type:r.type,animation:true,value:(r.value-t.value)*n+t.value}}}return r};function ze(c,h){var d={};for(var e=0;e<c.length;e++){var t={};for(var r=0;r<c[e].subAttr.length;r++){t[c[e].subAttr[r].id]=r}d[c[e].id]={index:e,subLinkIdToIndex:t}}return function(e){if(e==1)return h;var t=[];for(var r=0;r<h.length;r++){if(h[r].id in d){var n=c[d[h[r].id].index];var i={};for(var a in n.attr){i[a]=Re(n.attr[a],h[r].attr[a],e)}var s=[];for(var o=0;o<h[r].subAttr.length;o++){if(h[r].subAttr[o].id in d[h[r].id].subLinkIdToIndex){var l=n.subAttr[d[h[r].id].subLinkIdToIndex[h[r].subAttr[o].id]];var u={};for(var f in l.attr){u[f]=Re(l.attr[f],h[r].subAttr[o].attr[f],e)}s.push({id:l.id,name:l.name,subText:l.subText,subAttr:[],attr:u})}else{s.push(h[r].subAttr[o])}}t.push({id:h[r].id,name:h[r].name,subText:h[r].subText,subAttr:s,attr:i})}else{if(h[r].animation=="quick"){t.push(h[r])}}}return t}}function Ce(e){var t={};for(var r in e.__data){t[r]=e[r]}return JSON.stringify({version:"v1",render:{Series:e.__renderSeries,AOP:e.__renderAOP},data:t})}function Ee(e){e.prototype.$$updateView=function(){var f=this;if(!this._isMounted||!this.__painter)return;this.$$lifecycle("beforeDraw");this.__regionManager.erase();this.__painter.clearRect();var e=function e(i){var t={_subTexts:f.__renderSeries[i].subText,_subAttr:[]};for(var r in f.__renderSeries[i].attr){t[r]=f.__renderSeries[i].attr[r].value}for(var n=0;n<f.__renderSeries[i].subAttr.length;n++){var a={series:f.__renderSeries[i].subAttr[n].name,attr:{}};for(var s in f.__renderSeries[i].subAttr[n].attr){a.attr[s]=f.__renderSeries[i].subAttr[n].attr[s].value}t._subAttr.push(a)}f.__painter.config(ie);f.__defineSerirs[f.__renderSeries[i].name].link.call(f,f.__painter,t);var o=f.__defineSerirs[f.__renderSeries[i].name].region;if(o){var l=function e(r){var n=f;o[r].call(n,function(e,t){if(arguments.length>0)e=e+"";else e="default";return n.__regionManager.painter(i+"@"+r+"::"+e,t)},t)};for(var u in o){l(u)}}};for(var t=0;t<this.__renderSeries.length;t++){e(t)}if(this._platform=="uni-app"){setTimeout(function(){f.__platform_painter.draw();if(f.__regionManager!=null){f.__regionManager.draw()}},200)}this.$$lifecycle("drawed")};e.prototype.$$updateWithSize=function(){var e=this;this.$$lifecycle("beforeResize");var t=this.__el.clientWidth-(w(this.__el,"padding-left")+"").replace("px","")-(w(this.__el,"padding-right")+"").replace("px","");var r=this.__el.clientHeight-(w(this.__el,"padding-top")+"").replace("px","")-(w(this.__el,"padding-bottom")+"").replace("px","");this._width=t;this._height=r;this._max=t>r?t:r;this._min=t<r?t:r;if(t==0||r==0){this.__canvas.style.width="0px";this.__canvas.style.height="0px";this.$$lifecycle("resized");return}this.__painter=he(this._platform,this.__canvas,t,r);this.__regionManager.updateSize(t,r);if(x(this.__observeWatcher.stop)){this.__observeWatcher.stop();this.__observeWatcher.stop=null}setTimeout(function(){e.$$updateWithData(true);e.$$lifecycle("resized")},10)};e.prototype.$$updateWithData=function(e){var t=this;if(x(this.__observeWatcher.stop)){this.__observeWatcher.stop();this.__observeWatcher.stop=null}else{this.$$lifecycle("beforeUpdate")}this.__events={click:{},dblclick:{},mousemove:{},mousedown:{},mouseup:{}};var $=[],T=this;(function e(t,r,n,i,a){var s=[];for(var o=0;o<t.length;o++){for(var l in r){t[o].scope[l]=r[l]}var u=void 0;if("_id"in t[o]){u=t[o]._id.isBind?Oe(T,t[o]._id.express,t[o].scope):t[o]._id.express}else{u=i+t[o].index}var f=void 0;if("_animation"in t[o]){f=t[o]._animation.isBind?Oe(T,t[o]._animation.express,t[o].scope):t[o]._animation.express}else{f="lazy"}if(!a&&"c-for"in t[o]){var c=t[o]["c-for"];var h=void 0;if(k(c.data)){h=c.data}else{h=Oe(T,c.data,t[o].scope);if(S(h)){var d=h;h=[];for(var p=0;p<d;p++){h.push(p)}}}for(var v in h){t[o].scope[c.value]=h[v];if(c.key!=null)t[o].scope[c.key]=k(h)?+v:v;var g=e([t[o]],{},n,u+"for"+v+"-",true);if(n){for(var _=0;_<g.length;_++){s.push(g[_])}}}continue}if("c-if"in t[o]&&!Oe(T,t[o]["c-if"],t[o].scope));else{e(t[o].children,t[o].scope,false,u+"-",false);if(t[o].name!="group"){var m={name:t[o].name,attr:{},subAttr:[],subText:t[o].text,id:u,animation:f};for(var b in t[o].attrs){var y=t[o].attrs[b];m.attr[b]={animation:y.animation,type:y.type,value:y.value.isBind?Oe(T,y.value.express,t[o].scope):y.value.express}}m.subAttr=e(t[o].subAttrs,t[o].scope,true,u+"-",false);for(var x=0;x<t[o].events.length;x++){var w=t[o].events[x];T.__events[w.event][$.length+"@"+w.region]=T[w.method]}if(n)s.push(m);else $.push(m)}}}return s})(this.__renderAOP,{},false,"",false);if(this._platform=="default"&&this._debug){this.__el.getElementsByTagName("canvas")[0].setAttribute("__clunch__devtool__target__",Ce(this))}if(!this.__renderSeries||e||!this.__animation){this.__renderSeries=$;this.$$updateView();this.$$lifecycle("updated");return}var r=ze(this.__renderSeries,$);this.__observeWatcher.stop=p(function(e){t.__renderSeries=r(e);t.$$updateView()},this.__observeWatcher.time,function(e){if(e==1){t.__observeWatcher.stop=null;t.$$lifecycle("updated")}})}}function Pe(n){var e=function e(t){var r=n.__data[t];n[t]=r;Object.defineProperty(n,t,{get:function e(){return r},set:function e(t){r=t;if(!n.__observeWatcher.flag){setTimeout(function(){n.$$updateWithData();n.__observeWatcher.flag=false},0)}n.__observeWatcher.flag=true}})};for(var t in n.__data){e(t)}}function Ie(t){if(!(this instanceof Ie)){console.error("Clunch is a constructor and should be called with the `new` keyword");return}["beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","beforeResize","resized","beforeDestroy","destroyed"].forEach(function(e){if(k(t[e])){t[e]=U(t[e])}});this.$$lifecycle(t.beforeCreate);this.$$init(t);Pe(this);this.$$lifecycle("created");this.$mount(t.el)}ge(Ie);_e(Ie);Ee(Ie);Ie.prototype.__defineSerirs={};function je(t){try{t.__observeResize.observer=new ResizeObserver(function(){if(!t.__observeResize.flag){t.__observeResize.flag=true;var e=setInterval(function(){if(t.__observeResize.help){clearInterval(e);t.__observeResize.flag=false;t.$$updateWithSize()}t.__observeResize.help=true},200)}else{t.__observeResize.help=false}});t.__observeResize.observer.observe(t.__el)}catch(e){t.$$updateWithSize();console.error("ResizeObserver undefined!")}}function De(e){var t=U(e);for(var r in t.attrs){if(x(t.attrs[r])){t.attrs[r]=t.attrs[r](false)}}for(var n in t.subAttrs){for(var i in t.subAttrs[n]){if(x(t.subAttrs[n][i])){t.subAttrs[n][i]=t.subAttrs[n][i](false)}}}return t}function Fe(e){e.prototype.$reuseSeriesLink=function(e,t){this.__painter.config(ie);var r=this.__defineSerirs[e];var n={_subAttr:[],_subTexts:"texts"in t?t.texts:[]};for(var i in r.attrs){if(i in t.attr){n[i]=t.attr[i]}else{n[i]=r.attrs[i]["default"]}}if("subSeries"in t){for(var a=0;a<t.subSeries.length;a++){var s=t.subSeries[a];var o=r.subAttrs[s.name];var l={series:s.name,attr:{}};for(var u in s.attr){if(u in s.attr){l.attr[u]=s.attr[u]}else{l.attr[u]=o[u]["default"]}}n._subAttr.push(l)}}r.link.call(this,this.__painter,n)}}function We(n){Fe(n);n.series=function(e,t){if(arguments.length==1){for(var r in e){n.series(r,e[r])}}else{if(x(n.prototype.__defineSerirs[e])){console.warn("The series["+e+"] has been registered!")}n.prototype.__defineSerirs[e]=De(t)}return n}}We(Ie);Ie.prototype.$mount=function(e){var l=this;if(this._isDestroyed){console.warn("The clunch has been destroyed!");return this}if(this._isMounted){console.warn("The clunch is already mounted!");return}if(this._platform=="default"&&!u(e)){console.warn("Mount node does not exist!");return this}this.$$lifecycle("beforeMount");if(!this.__renderFlag){this.__renderOptions=this.$$templateCompiler(e.innerHTML);this.__renderAOP=te(this.__renderOptions,this.__defineSerirs)}this.__el=e;if(this._platform=="default"){this.__el.setAttribute("__clunch__devtool__",(new Date).valueOf()+""+(Math.random()*1e5).toFixed(0));e.innerHTML="<canvas>ÈùûÂ∏∏Êä±Ê≠âÔºåÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅcanvas!</canvas>";this.__canvas=e.getElementsByTagName("canvas")[0];je(this)}this.$$updateWithData();this.__events_platform={click:[],dblclick:[],mousemove:[],mousedown:[],mouseup:[]};["click","dblclick","mousemove","mousedown","mouseup"].forEach(function(o){var e=function e(t){l.__regionManager.getRegion(t,function(e){if(e[0]!=null){var t=e[0].split("::");var r=l.__events[o][t[0]];if(x(r)){var n=t[0].split("@");var i=l.__renderSeries[n[0]];var a={};for(var s in i.attr){a[s]=i.attr[s].value}r.call(l,{id:i.id,series:i.name,region:n[1],subRegion:t[1],attr:a,left:e[1],top:e[2],data:e[3]})}}})};if(l._platform=="default"){de(l.__canvas,o,e)}else{l.__events_platform[o].push(e)}});this.$bind=function(e,o){var l=this;var t=function e(t){l.__regionManager.getRegion(t,function(e){var t;if(e[0]!=null){var r=e[0].split("::");var n=r[0].split("@");var i=l.__renderSeries[n[0]];var a={};for(var s in i.attr){a[s]=i.attr[s].value}t={id:i.id,series:i.name,region:n[1],subRegion:r[1],attr:a,left:e[1],top:e[2],data:e[3]}}else{t={series:null,region:null,subRegion:null,attr:{},left:-1,top:-1,data:null}}t.left=e[1];t.top=e[2];o.call(l,t)})};if(this._platform=="default"){de(this.__canvas,e,t)}else{if(!(e in this.__events_platform))this.__events_platform[e]=[];this.__events_platform[e].push(t)}return this};this._isMounted=true;this.$$lifecycle("mounted");if(this._platform!="default"){this.__painter=he(this._platform,e,e.width,e.height);this.__platform_painter=e.painter;this.$resize(e.width,e.height)}return this};Ie.prototype.$unmount=function(){if(this._isDestroyed){console.warn("The object has been destroyed!");return this}if(!this._isMounted){console.warn("Object not mounted!");return this}this.$$lifecycle("beforeUnmount");this.__observeResize.observer.disconnect();this.__painter=null;this.__canvas=null;this._isMounted=false;this.$$lifecycle("unmounted");return this};Ie.prototype.$destroy=function(){if(this._isDestroyed){console.warn("The object has been destroyed!");return this}if(this._isMounted)this.$unmount();this.$$lifecycle("beforeDestroy");delete this.__regionManager;this.__observeResize={};this.__observeWatcher={};this._isDestroyed=true;this.$$lifecycle("destroyed");return this};Ie.prototype.$resize=function(e,t){if(this._isMounted||this._platform!="default"){if(this._platform!="default"){if(!S(e)){console.warn("The width undefined!");return this}if(!S(t)){console.warn("The height undefined!");return this}this.$$lifecycle("beforeResize");this._width=e;this._height=t;this._max=e>t?e:t;this._min=e<t?e:t;if(this.__regionManager!=null){this.__regionManager.updateSize(e,t)}this.$$updateWithData(true);this.$$lifecycle("resized")}else{this.$$updateWithSize()}}else{console.warn("The clunch not mounted!")}return this};Ie.series("group",[function(){return{attrs:{}}}]);function Le(a){var s={},o=0;a=a.trim();var e=function e(){var t="",r="";for(;o<a.length;o++){if(me.blanksReg.test(a[o])||o==a.length-1){t+=a[o];if(!me.blanksReg.test(t)){s[t.trim()]=""}o+=1;break}else if(a[o]=="="){o+=1;var n=null,i=-1;if(a.substr(o,1)=='"'||a.substr(o,1)=="'"){n=a.substr(o,1);i=1;o+=1}else if(a.substr(o,2)=='"'||a.substr(o,2)=="'"){n=a.substr(o,2);i=2;o+=2}if(n!==null){for(;o<a.length;o++){if(a.substr(o,i)==n){s[t.trim()]=r.trim();o+=2;break}else{r+=a[o]}}}else{for(;o<a.length;o++){if(me.blanksReg.test(a[o])){s[t.trim()]=r.trim();o+=1;break}else{r+=a[o]}}}break}else{t+=a[o]}}if(o<a.length){e()}};e();return s}function Be(l){var u=-1,f=null;var c=false,h="";var d=["script","pre","style","code"];var p=function e(){f=u++<l.length-1?l[u]:null;return f};var v=function e(t){return l.substring(u,t+u>l.length?l.length:t+u)};p();while(me.blankReg.test(f)&&u<l.length-1){p()}return function(){var e=f,t={};if(e==null)return null;if(c){t.type="textcode";t.tagName=e;while(v(h.length+3)!="</"+h+">"&&u<l.length){t.tagName+=p()}t.tagName=t.tagName.replace(/<$/,"");c=false;return t}if(v(4)=="\x3c!--"){t.type="comment";t.tagName=e;while(v(3)!="--\x3e"&&u<l.length){t.tagName+=p()}p();p();p();t.tagName=t.tagName.replace(/^<!--/,"").replace(/-$/,"");return t}if(v(9)=="<!DOCTYPE"){t.type="DOCTYPE";t.tagName=e;while(v(1)!=">"&&u<l.length){t.tagName+=p()}p();t.tagName=t.tagName.replace(/^<!DOCTYPE/,"").replace(/>$/,"");return t}else if(e=="<"){var r=false,n=null,i=null;while((r||f!=">")&&u<l.length){e+=p();if(r){var a=v(i+1).substring(1);if(a==n){r=false}}else{var a=v(2);if(a=='="'||a=="='"){n=a.replace("=","");i=1;r=true}a=v(3);if(a=='="'||a=="='"){n=a.replace("=","");i=2;r=true}}}if(/^<\//.test(e)){t.tagName=e.replace(/^<\//,"").replace(/>$/,"");t.type="endTag"}else{if(/\/>$/.test(e)){t.type="fullTag";e=e.replace(/\/>$/,"")}else{t.type="beginTag";e=e.replace(/>$/,"")}e=e.replace(/^</,"");t.tagName="";var s=0;for(;s<e.length;s++){if(e[s]==" ")break;t.tagName+=e[s]}var o=e.substring(s);if(me.blanksReg.test(o)){t.attrs={}}else{t.attrs=Le(o)}}}else{t.type="textcode";t.tagName=f;while(v(1)!="<"&&u<l.length){t.tagName+=p()}t.tagName=t.tagName.replace(/<$/,"");u-=1}if(t.type=="beginTag"){if(d.indexOf(t.tagName.toLowerCase())>-1){c=true;h=t.tagName}}else if(t.type=="endTag"){if(d.indexOf(t.tagName.toLowerCase())>-1){c=false}}p();return t}}function Ue(e){e=qe(e);var t=0,r=[];e.forEach(function(e){if(e.type=="beginTag"){r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:++t,__tagType__:"double"})}else if(e.type=="endTag"){t-=1}else if(e.type=="textcode"){r.push({type:"text",content:e.tagName,__deep__:t+1})}else if(e.type=="comment"){r.push({type:"comment",content:e.tagName,__deep__:t+1})}else{r.push({type:"tag",name:e.tagName,attrs:e.attrs,__deep__:t+1,__tagType__:"single"})}});return r}var qe=function e(n){var i=[];n.forEach(function(e,t){if(e.type=="beginTag"){i.push([t,e.tagName])}else if(e.type=="endTag"){while(i.length>0){var r=i.pop();if(r[1]==e.tagName){break}else{n[r[0]].type="fullTag"}}}});return n};function Ve(e,t){if(!G(e))throw new Error("Template must be a String!");var r=Be(e.trim());var n=r(),i=[];while(n!=null){if(n.type=="textcode"&&me.blanksReg.test(n.tagName));else if(n.type=="DOCTYPE");else if(n.type=="comment"){if(t){i.push(n)}}else{i.push(n)}n=r()}i=Ue(i);var a=[null],s=0;for(var o=0;o<i.length;o++){var l=o,u=i[o].__deep__;i[o].childNodes=[];i[o].preNode=null;i[o].nextNode=null;var f=a[a.length-1];var c=a.length>1?a[a.length-2]:null;if(u==s){i[l].preNode=f;i[f].nextNode=l;i[l].parentNode=c;i[c].childNodes.push(l);a[a.length-1]=l}else if(u>s){i[l].parentNode=f;if(f!=null)i[f].childNodes.push(l);a.push(l)}else{var h=a[a.length-1-(s-u)];var d=a[a.length-2-(s-u)];i[l].preNode=h;if(h!=null)i[h].nextNode=l;i[l].parentNode=d;if(d!=null)i[d].childNodes.push(l);for(var p=0;p<s-u;p++){a.pop()}a[a.length-1]=l}s=u}return i}function Ye(e){var a=Ve("<clunch>"+e+"</clunch>");return function e(t){var r=[];for(var n=0;n<t.childNodes.length;n++){var i=a[t.childNodes[n]];if(i.type=="tag"){r.push({name:i.name,attrs:i.attrs,children:e(i)})}else{r.push(i.content.trim())}}return r}(a[0])}Ie.prototype.$$templateCompiler=Ye;if((typeof module==="undefined"?"undefined":n(module))==="object"&&n(module.exports)==="object"){module.exports=Ie}else{window.Clunch=Ie}})();